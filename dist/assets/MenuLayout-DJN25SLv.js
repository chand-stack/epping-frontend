import{r as d,j as e}from"./ui-RojGIA-k.js";import{c as F,C as N,a as b,B as r,b as T,u as z,f as v,e as A,L}from"./index-ppAren82.js";import{S as O}from"./skeletons-DUEsoNJz.js";import{M as w,P as g}from"./api-DsUKC986.js";/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],H=F("truck",D),E={"oh-smash":[{day:"Monday",open:"3:00 PM",close:"10:00 PM"},{day:"Tuesday",open:"3:00 PM",close:"10:00 PM"},{day:"Wednesday",open:"3:00 PM",close:"10:00 PM"},{day:"Thursday",open:"3:00 PM",close:"10:00 PM"},{day:"Friday",open:"3:00 PM",close:"11:00 PM"},{day:"Saturday",open:"3:00 PM",close:"11:00 PM"},{day:"Sunday",open:"3:00 PM",close:"10:00 PM"}],"wonder-wings":[{day:"Monday",open:"3:00 PM",close:"10:00 PM"},{day:"Tuesday",open:"3:00 PM",close:"10:00 PM"},{day:"Wednesday",open:"3:00 PM",close:"10:00 PM"},{day:"Thursday",open:"3:00 PM",close:"10:00 PM"},{day:"Friday",open:"3:00 PM",close:"11:00 PM"},{day:"Saturday",open:"3:00 PM",close:"11:00 PM"},{day:"Sunday",open:"3:00 PM",close:"10:00 PM"}],"okra-green":[{day:"Monday",open:"5:00 PM",close:"10:00 PM"},{day:"Tuesday",open:"Closed",close:""},{day:"Wednesday",open:"5:00 PM",close:"10:00 PM"},{day:"Thursday",open:"5:00 PM",close:"10:00 PM"},{day:"Friday",open:"5:00 PM",close:"11:00 PM"},{day:"Saturday",open:"5:00 PM",close:"11:00 PM"},{day:"Sunday",open:"5:00 PM",close:"10:00 PM"}]};function P(t){if(!t||t==="Closed")return-1;const o=t.match(/(\d+):(\d+)\s?(AM|PM)/i);if(!o)return-1;let i=parseInt(o[1],10);const m=parseInt(o[2],10),h=o[3].toUpperCase();return h==="PM"&&i!==12&&(i+=12),h==="AM"&&i===12&&(i=0),i*60+m}const Q=({restaurant:t,address:o="53 High St, Epping"})=>{const[i,m]=d.useState("delivery"),[h,n]=d.useState(!1),[u,a]=d.useState(""),[s,j]=d.useState(""),[l,x]=d.useState(null);d.useEffect(()=>{const c=`scheduledOrder:${t}`,f=localStorage.getItem(c);f&&x(f)},[t]);const p=d.useMemo(()=>{const c=E[t],f=new Date,k=f.toLocaleDateString("en-US",{weekday:"long"}),M=f.getHours()*60+f.getMinutes(),y=c.find($=>$.day===k);if(!y||y.open==="Closed")return{open:!1,banner:"Closed today"};const S=P(y.open),I=P(y.close),C=M>=S&&M<I;return{open:C,banner:C?`Open now â€¢ Last orders 15 min before ${y.close}`:`Accepting scheduled orders only. Online ordering resumes at ${y.open}`}},[t]);return e.jsxs("div",{id:"menu-info",className:"container mx-auto",children:[e.jsx(N,{className:"rounded-2xl border border-gray-200",children:e.jsx(b,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["ðŸ“ ",o]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:"â±ï¸ ~15â€“25 min"}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:"Delivery: Â£1.99 (min: Â£12)"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs(r,{variant:i==="delivery"?"default":"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>m("delivery"),children:[e.jsx(H,{className:"w-4 h-4"})," Delivery"]}),e.jsxs(r,{variant:i==="pickup"?"default":"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>m("pickup"),children:[e.jsx(O,{className:"w-4 h-4"})," Pickup"]}),e.jsx("div",{className:"mx-2"}),e.jsxs(r,{variant:"outline",size:"sm",className:"flex items-center gap-2",onClick:()=>n(!0),children:[e.jsx(T,{className:"w-4 h-4"})," ",l?"Reschedule":"Schedule"]})]}),e.jsx("div",{className:`rounded-xl p-3 text-sm ${p.open?"bg-emerald-50 text-emerald-800 border border-emerald-200":"bg-amber-50 text-amber-800 border border-amber-200"}`,children:l?e.jsxs("span",{children:["âœ… Scheduled order: ",l]}):e.jsx("span",{children:p.banner})})]})})}),h&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-[90%] max-w-md p-5",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Schedule your order"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),e.jsx("input",{type:"date",className:"w-full border rounded-md p-2",value:u,onChange:c=>a(c.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Time"}),e.jsx("input",{type:"time",className:"w-full border rounded-md p-2",value:s,onChange:c=>j(c.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx(r,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(r,{onClick:()=>{if(!u||!s)return;const c=new Date(`${u}T${s}`).toLocaleString([],{dateStyle:"medium",timeStyle:"short"}),f=`scheduledOrder:${t}`;localStorage.setItem(f,c),x(c),n(!1)},children:"Save"})]}),l&&e.jsx("button",{className:"text-sm text-red-600 underline",onClick:()=>{localStorage.removeItem(`scheduledOrder:${t}`),x(null)},children:"Clear scheduled order"})]})]})})]})},R=d.memo(({item:t,variant:o="default",className:i=""})=>{const{addItem:m,state:h}=z(),[n,u]=d.useState(1),[a,s]=d.useState(!1),l=!!h.items.find(c=>c.id===t.id),x=d.useCallback(()=>{if(l){s(!1);return}m({...t,quantity:n}),s(!1),u(1)},[l,m,t,n]),p=d.useCallback(c=>{c>=1&&c<=10&&u(c)},[]);return o==="compact"?e.jsxs("div",{className:`flex items-center space-x-2 ${i}`,children:[a&&!l&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>p(n-1),disabled:n<=1,className:"w-10 h-10 p-0 min-h-[44px] min-w-[44px]",children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx("span",{className:"w-10 text-center text-sm font-medium min-h-[44px] flex items-center justify-center",children:n}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>p(n+1),disabled:n>=10,className:"w-10 h-10 p-0 min-h-[44px] min-w-[44px]",children:e.jsx(g,{className:"w-4 h-4"})})]}),e.jsx(r,{onClick:l?()=>s(!1):x,size:"sm",className:l?"bg-green-600 hover:bg-green-700":"",children:l?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4 mr-1"}),"In Cart"]}):a?"Add to Cart":e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 mr-1"}),"Add"]})})]}):o==="inline"?e.jsx("div",{className:`flex items-center justify-between ${i}`,children:e.jsxs("div",{className:"flex items-center space-x-2",children:[a&&!l&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>p(n-1),disabled:n<=1,className:"w-8 h-8 p-0",children:e.jsx(w,{className:"w-3 h-3"})}),e.jsx("span",{className:"w-8 text-center text-sm font-medium",children:n}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>p(n+1),disabled:n>=10,className:"w-8 h-8 p-0",children:e.jsx(g,{className:"w-3 h-3"})})]}),e.jsx(r,{onClick:l?()=>s(!1):x,size:"sm",className:l?"bg-green-600 hover:bg-green-700":"",children:l?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4 mr-1"}),"In Cart"]}):a?"Add to Cart":e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 mr-1"}),"Add"]})})]})}):e.jsx(N,{className:`hover:shadow-md transition-shadow ${i}`,children:e.jsx(b,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold",children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description}),e.jsxs("p",{className:"text-lg font-bold text-primary mt-1",children:["Â£",t.price.toFixed(2)]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[a&&!l&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>p(n-1),disabled:n<=1,className:"w-8 h-8 p-0",children:e.jsx(w,{className:"w-3 h-3"})}),e.jsx("span",{className:"w-8 text-center text-sm font-medium",children:n}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>p(n+1),disabled:n>=10,className:"w-8 h-8 p-0",children:e.jsx(g,{className:"w-3 h-3"})})]}),e.jsx(r,{onClick:l?()=>s(!1):x,size:"sm",className:l?"bg-green-600 hover:bg-green-700":"",children:l?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4 mr-1"}),"In Cart"]}):a?"Add to Cart":e.jsxs(e.Fragment,{children:[e.jsx(g,{className:"w-4 h-4 mr-1"}),"Add"]})})]})]})})})}),V=({brand:t,categories:o,leftExtra:i})=>{const[m,h]=d.useState(o[0]?.name??""),n=d.useRef({}),u=d.useCallback(a=>{const s=n.current[a];s&&(s.scrollIntoView({behavior:"smooth",block:"start"}),h(a))},[]);return d.useEffect(()=>{const a=new IntersectionObserver(j=>{j.forEach(l=>{if(l.isIntersecting){const x=l.target.getAttribute("data-category");x&&h(x)}})},{rootMargin:"-40% 0px -55% 0px",threshold:[0,.2,.6,1]});return Object.values(n.current).filter(Boolean).forEach(j=>a.observe(j)),()=>a.disconnect()},[o]),e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 sm:gap-6",children:[e.jsx("aside",{className:"lg:col-span-3",children:e.jsxs("div",{className:"lg:sticky lg:top-24 space-y-3 sm:space-y-4",children:[i?e.jsx("div",{className:"p-3 sm:p-4 border border-gray-200 rounded-lg bg-white",children:i}):null,e.jsx("div",{className:"flex lg:flex-col gap-2 overflow-x-auto pb-2 lg:overflow-x-visible lg:space-y-2",children:o.map(a=>e.jsx(r,{variant:m===a.name?"default":"outline",className:A("whitespace-nowrap min-h-[44px] min-w-[120px] text-sm sm:text-base px-3 sm:px-4 py-2 flex-shrink-0",m===a.name?"":"bg-white hover:bg-gray-50"),onClick:()=>u(a.name),children:a.name},a.name))})]})}),e.jsx("section",{id:"menu",className:"lg:col-span-6 space-y-6 sm:space-y-8",children:o.map(a=>e.jsxs("div",{"data-category":a.name,ref:s=>{n.current[a.name]=s},children:[e.jsx("h3",{className:"text-xl sm:text-2xl font-heading font-bold mb-3 sm:mb-4",children:a.name}),e.jsx("div",{className:"space-y-3 sm:space-y-4",children:a.items.map((s,j)=>e.jsx(N,{className:"border border-gray-200",children:e.jsx(b,{className:"p-3 sm:p-4",children:e.jsxs("div",{className:"flex items-start gap-3 sm:gap-4",children:[s.image?e.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded-md flex-shrink-0",loading:"lazy"}):null,e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-semibold text-sm sm:text-base",children:s.name}),s.description?e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-1 line-clamp-2",children:s.description}):null]}),e.jsxs("div",{className:"font-semibold text-sm sm:text-base flex-shrink-0",children:["Â£",Number.parseFloat(s.price).toFixed(2)]})]}),e.jsx("div",{className:"mt-2 sm:mt-3",children:e.jsx(R,{item:{id:`${t.toLowerCase().replace(/\s+/g,"-")}-${s.name.toLowerCase().replace(/\s+/g,"-")}`,name:s.name,price:parseFloat(s.price),description:s.description||"",brand:t,image:s.image},className:"w-full min-h-[44px] text-sm sm:text-base"})})]})]})})},s.id||`${a.name}-${s.name}-${j}`))})]},a.name))}),e.jsx("aside",{className:"lg:col-span-3",children:e.jsx("div",{className:"lg:sticky lg:top-24",children:e.jsx(N,{className:"border border-gray-200",children:e.jsxs(b,{className:"p-3 sm:p-4 space-y-3",children:[e.jsx("p",{className:"font-semibold text-sm sm:text-base",children:"Your Order"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Items you add will appear here."}),e.jsx(r,{asChild:!0,className:"w-full min-h-[44px] text-sm sm:text-base",children:e.jsx(L,{to:"/cart",children:"Go to Cart"})})]})})})})]})})};export{Q as M,H as T,V as a};
