import{r as a,j as e}from"./ui-RojGIA-k.js";import{i as E,j as A,n as k,B as g,C as P,g as B,h as I,o as U,a as F}from"./index-ppAren82.js";import{L as f,U as T,I as j,a as q,E as D}from"./Label-CB2uu4dw.js";import{A as R,L as y}from"./lock-Bn3FBp61.js";import"./vendor-gH-7aFTg.js";const K=()=>{const[n,b]=a.useState(""),[o,w]=a.useState(""),[l,N]=a.useState(!1),[t,m]=a.useState(!1),[u,c]=a.useState(""),[x,h]=a.useState(""),{login:v,isAuthenticated:p}=E(),r=A(),i=k();a.useEffect(()=>{if(p){const s=i.state?.from?.pathname||"/admin";r(s,{replace:!0})}},[p,r,i]);const S=async s=>{s.preventDefault(),m(!0),c(""),h("");try{const d=await v(n,o);d.success?(h("Login successful! Redirecting..."),setTimeout(()=>{const L=i.state?.from?.pathname||"/admin";r(L,{replace:!0})},1e3)):c(d.message)}catch{c("An unexpected error occurred. Please try again.")}finally{m(!1)}},C=()=>{r("/")};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs(g,{variant:"ghost",onClick:C,className:"mb-6 text-gray-600 hover:text-gray-800",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Back to Site"]}),e.jsxs(P,{className:"shadow-xl",children:[e.jsxs(B,{className:"text-center space-y-2",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center",children:e.jsx(y,{className:"w-6 h-6 text-white"})}),e.jsx(I,{className:"text-2xl font-bold",children:"Admin Login"}),e.jsx(U,{children:"Sign in to access the Epping Food Court admin dashboard"})]}),e.jsx(F,{children:e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"username",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx(T,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(j,{id:"username",type:"text",placeholder:"Enter your username",value:n,onChange:s=>b(s.target.value),className:"pl-10",required:!0,disabled:t})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(f,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(j,{id:"password",type:l?"text":"password",placeholder:"Enter your password",value:o,onChange:s=>w(s.target.value),className:"pl-10 pr-10",required:!0,disabled:t}),e.jsx("button",{type:"button",onClick:()=>N(!l),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:t,children:l?e.jsx(q,{className:"w-4 h-4"}):e.jsx(D,{className:"w-4 h-4"})})]})]}),u&&e.jsx("div",{className:"border border-red-200 bg-red-50 text-red-800 px-4 py-3 rounded-md",children:u}),x&&e.jsx("div",{className:"border border-green-200 bg-green-50 text-green-800 px-4 py-3 rounded-md",children:x}),e.jsx(g,{type:"submit",className:"w-full",disabled:t||!n||!o,children:t?"Signing in...":"Sign In"})]})})]})]})})};export{K as default};
